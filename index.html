<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Meetup Paris.js - La philosophie Elm en Javascript</title>
    <meta name="description" content="La philosophie Elm en Javascript">
    <meta name="author" content="OuiCar">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/blood.css" id="theme">
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">
      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section>
          <h2>La philosophie Elm en Javascript</h2>
          <h4>Juin 2016 - Paris.js</h4>
        </section>
        <section>
          <h2>Frontend OuiCar</h2>
          <ul>
            <li>Environ 75.000 lignes de Javascript</li>
            <li>Surtout du React / es6 mais encore du jQuery</li>
            <li>Nombreux développeurs, certains partis</li>
          </ul>
        </section>
        <section>
          <h2>Une des solutions</h2>
          <p>
            S'inspirer du langage Elm.
          </p>
          <img src="img/elm.png" alt="elm-logo" style="border: 0; background: 0; box-shadow: 0 0 0;" />
        </section>
        <section>
          <h2>Qu'est-ce que Elm ?</h2>
          <p>Un langage :</p>
          <ul>
            <li>purement fonctionel</li>
            <li>typé</li>
            <li>compile vers Javascript</li>
          </ul>
        </section>
        <section>
          <h2>Qu'est-ce que Elm ?</h2>
          <p>Une architecture :</p>
          <img src="img/elm-architecture.png" alt="elm-architecture" style="max-height: 450px" />
        </section>
        <section>
          <h2>Exemple</h2>
          <p>
            Compteur
          </p>
          <pre><code class="elm">type alias Model = Int

type Msg = Increment | Decrement

update : Msg -> Model -> Model
update msg model =
  case msg of
    Increment -> model + 1
    Decrement -> model - 1

view : Model -> Html Msg
view model =
  div [] [ button [ onClick Decrement ] [ text "-" ]
         , div [] [ text (toString model) ]
         , button [ onClick Increment ] [ text "+" ] ]</code></pre>
        </section>
        <section>
          <h2>Compteur</h2>
          <img src="img/counter.png" alt="counter" />
        </section>
        <section>
          <h2>Apports</h2>
          <ul>
            <li>débogage à la compilation (types)</li>
            <li>composabilité</li>
            <li>maintenabilité</li>
            <li>maîtrise des side-effects</li>
          </ul>
        </section>
        <section>
          <h2>Apports</h2>
          <p><q><strong>Redux</strong> evolves the ideas of <strong>Flux</strong>, but avoids its complexity by taking cues from <strong>Elm</strong>.
</q></p>
          <p style="float: right">
            Documentation Redux.
          </p>
        </section>
        <section>
          Parler de l'aspect graduel / compatibilité JS
        </section>
        <section>
          TODO:
          typage, compilation, Redux, React, fonctions pures, immutabilité, gestion des effets,
          communication avec JS standard, composabilité, sûreté / détection des erreurs, testabilité / story book,
          types sommes, top-down
          Défis restants : routing, effets
        </section>
        <section>
          <h2>View</h2>
          <p>
            En Elm :
          </p>
          <p><code>view : Model -> Html</code></p>
          <pre class="fragment"><code class="elm">view model =
  div [] [ button [ onClick Decrement ] [ text "-" ]
         , div [] [ text (toString model) ]
         , button [ onClick Increment ] [ text "+" ] ]</code></pre>
        </section>
        <section>
          <h2>View</h2>
          <p>
            En Javascript : <span class="fragment">avec React :</span>
          </p>
          <pre class="fragment"><code class="jsx">class Counter extends Component {
  render() {
    return (
      <div>
        <button onClick={this.props.onDecrement}> - </button>
        <p>{this.props.counter}</p>
        <button onClick={this.props.onIncrement}> + </button>
      </div>
    );
  }
}</code></pre>
        </section>
        <section>
          <h2>React</h2>
          <p>
            La vue devient une fonction :
          </p>
          <p>
            <code>component : Props -> HTML</code><br />
          </p>
          <p class="fragment">
            Virtual DOM avec diff pour optimiser le rendu :
            <img src="img/react.png" alt="react" />
          </p>
        </section>
        <section>
          <h2>Bonnes pratiques</h2>
          <p>
            TODO
          </p>
          <ul>
            <li>dumb components</li>
            <li>top-down</li>
            <li>immutabilité -> optimisation du ré-rendu avec composants Pure</li>
            <li>story-book</li>
          </ul>
        </section>
        <section>
          <h2>Model</h2>
          <p>
            En Elm :
          </p>
          <pre class="fragment"><code class="elm">-- Counter
type alias Model = Int
</code></pre>
          <pre class="fragment"><code class="elm">-- Car
type alias Model =
  { brand : String,
    model : String,
    km : Int
  }
</code></pre>
        </section>
        <section>
          <h2>Model</h2>
          <p>
            En Javascript :
          </p>
          <p class="fragment">
            Pas de typage :/.
          </p>
        </section>
        <section>
          <h2>Model</h2>
          <p>
            En JS + Flow :
          </p>
          <pre class="fragment"><code class="js">// Counter
type Model = number;
</code></pre>
          <pre class="fragment"><code class="js">// Car
type Model = {
  brand: string,
  model: string,
  km: number
};
</code></pre>
        </section>
        <section>
          TODO : expliquer Flow rapidement, donner capture d'écran de Nuclide, parler de TypeScript
        </section>
        <section>
          <h2>Update</h2>
          -> Redux ;
          Montrer les types sommes ;
          parler de l'écosystème Redux : montrer les logs ou Redux dev tools
        </section>
        <section>
          <h2>Composition</h2>
          <img src="img/elm-composition.jpg" alt="elm-composition" />
        </section>
        <section>
          <h2>Composition</h2>
          <p>
            TODO
          </p>
        </section>
        <section>
          Communication avec le monde non-Flow ; Decode et API
        </section>
        <section>
          Limitations : effets (pour l'instant Thunk), routage (pour l'instant React Router)
        </section>
        <section>
          <h1>Merci.</h1>
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          // Shim for `element.classList`.
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },

          // Syntax highlight for <code> elements
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },

        ]
      });
    </script>
  </body>
</html>
